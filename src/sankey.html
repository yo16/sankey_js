<!DOCTYPE html>
<html lang="ja">
    <head>
        <meta charSet="utf-8"/>
        <title>Sankey_js</title>
        <link href="./css/main.css" rel="stylesheet" />
        <script src="./js/lib/jquery-3.6.0.min.js" charset="utf-8"></script>
        <script src="./js/lib/d3.v4.min.js" charset="utf-8"></script>
        <script src="./js/lib/d3-sankey-diagram.min.js" charset="utf-8"></script>
        <script src="./js/main.js"></script>
    </head>

    <body>
        <div id="sample">
            CSVファイル or TSVファイルをドラッグ＆ドロップしてください。<br />
            <br />
            <hr />
            CSV,TSVのフォーマットはこんな感じ↓<br />
            １行＝１IDの遷移<br />
            <style>
                table, td{
                    border: 1px solid #ccc;
                }
            </style>
            <table>
                <tr>
                    <td>Start</td>
                    <td>Step1</td>
                    <td>Step2</td>
                    <td>Step3</td>
                </tr>
                <tr><td>TOP</td><td>Contents1-1</td><td>Contents2-1</td><td>Contents3-1</td></tr>
                <tr><td>TOP</td><td>Contents1-1</td><td>Contents2-2</td><td>Contents3-2</td></tr>
                <tr><td>TOP</td><td>Contents1-1</td><td>Contents2-2</td><td>Contents3-1</td></tr>
                <tr><td>TOP</td><td>Contents1-1</td><td>Contents2-2</td><td>Contents3-2</td></tr>
                <tr><td>TOP</td><td>Contents1-1</td><td>Contents2-2</td><td>Contents3-1</td></tr>
                <tr><td>TOP</td><td>Contents1-1</td><td>Contents2-3</td><td>Contents3-2</td></tr>
                <tr><td>TOP</td><td>Contents1-2</td><td>Contents2-1</td><td>Contents3-1</td></tr>
                <tr><td>TOP</td><td>Contents1-2</td><td>Contents2-1</td><td>Contents3-2</td></tr>
                <tr><td>TOP</td><td>Contents1-2</td><td>Contents2-2</td><td>Contents3-1</td></tr>
                <tr><td>TOP</td><td>Contents1-2</td><td>Contents2-1</td><td>Contents3-2</td></tr>
            </table>
            <hr />
            JSONのフォーマットはこんな感じ↓<br />
            <pre><code>{
    'nodes': [
        {'id': 'TOP', 'title': 'TOP'},
        {'id': 'C11', 'title': 'Contents1-1'},
        {'id': 'C12', 'title': 'Contents1-2'},
        {'id': 'C21', 'title': 'Contents2-1'},
        {'id': 'C22', 'title': 'Contents2-2'},
        {'id': 'C23', 'title': 'Contents2-3'},
        {'id': 'C31', 'title': 'Contents3-1'},
        {'id': 'C32', 'title': 'Contents3-2'}
    ],
    'links': [
        {'source': 'TOP', 'target': 'C11', 'type': 0, 'value': 6},
        {'source': 'TOP', 'target': 'C12', 'type': 1, 'value': 4},
        {'source': 'C11', 'target': 'C21', 'type': 0, 'value': 1},
        {'source': 'C11', 'target': 'C22', 'type': 0, 'value': 4},
        {'source': 'C11', 'target': 'C23', 'type': 0, 'value': 1},
        {'source': 'C12', 'target': 'C21', 'type': 1, 'value': 3},
        {'source': 'C12', 'target': 'C22', 'type': 1, 'value': 1},
        {'source': 'C21', 'target': 'C31', 'type': 1, 'value': 2},
        {'source': 'C21', 'target': 'C32', 'type': 1, 'value': 2},
        {'source': 'C22', 'target': 'C31', 'type': 0, 'value': 3},
        {'source': 'C22', 'target': 'C32', 'type': 0, 'value': 2},
        {'source': 'C23', 'target': 'C32', 'type': 0, 'value': 1}
    ],
    'groups': [
        {'title': 'Start',
            'nodes': ['TOP']},
            {'title': 'Step1',
            'nodes': ['C11','C12']},
            {'title': 'Step2',
            'nodes': ['C21','C22','C23']},
        {'title': 'Step3',
            'nodes': ['C31','C32']}
    ]
}</code></pre>
            <hr />
            ↑のファイルから作られるもの↓
        </div>
        <input type="button" id="btn_download_svg" value="Download SVG" />
        <input type="button" id="btn_download_png" value="Download PNG" />
        <br /><span id="alert_message"></span>
        <svg id="sankey_svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" ></svg>
        <div id="fade_layer"></div>
    </body>
</html>
